"use strict";var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!(i&&_arr.length===i));_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i["return"]&&_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();(function b(c,d,g){function h(p,q){if(!d[p]){if(!c[p]){var v="function"==typeof require&&require;if(!q&&v)return v(p,!0);if(k)return k(p,!0);var w=new Error("Cannot find module '"+p+"'");throw w.code="MODULE_NOT_FOUND",w}var x=d[p]={exports:{}};c[p][0].call(x.exports,function(y){var z=c[p][1][y];return h(z?z:y)},x,x.exports,b,c,d,g)}return d[p].exports}var k="function"==typeof require&&require;for(var m=0;m<g.length;m++)h(g[m]);return h})({1:[function(b,c,d){function g(ca){T||ca.play()}function h(ca){g(Z[ca]),S[ca].classList.toggle("flip")}function k(){var ca=void 0,da=void 0,ea=void 0;for(ea=aa.length;ea;ea--)ca=Math.floor(Math.random()*ea),da=aa[ea-1],aa[ea-1]=aa[ca],aa[ca]=da}function m(){P++;1<R.length&&(aa[R[0]]===aa[R[1]]&&R[0]!==R[1]?(Q++,R.forEach(function(ca,da){S[ca].dispatchEvent(M),1==da&&function(){var ea=R;S[ca].addEventListener(ba,function(){ea.forEach(function(fa){S[fa].dispatchEvent(N)}),g(Y.matchSound),Q==O&&setTimeout(q,500)})}()}),R=[]):(R[0]!==R[1]&&function(){var ca=R;setTimeout(function(){ca.forEach(function(da){h(da)})},500)}(),R=[]));w()}function p(ca){for(;ca.firstChild;)ca.removeChild(ca.firstChild);return!0}function q(){g(Y.winSound),F.classList.add("glow"),V>U&&(U=V,K.innerHTML=U,localStorage&&localStorage.setItem("christmas_memory_best",U)),console.log("you win!")}function v(){return Math.round((Date.now()-null)/1e3)}function w(){var ca=20*(120-v()),da=25*(60-P);L.innerHTML=V=(0<ca?ca:0)+(0<da?da:0)}function x(){F.childNodes.length&&p(F);var ca=null;aa.forEach(function(da,ea){var fa=D[da].cloneNode(),ga=E.cloneNode();0==ea%5&&(ca=H.cloneNode(!0),F.appendChild(ca));var ha=G.cloneNode(!0);ha.id="card_"+ea,ha.querySelector(".front").appendChild(fa),ha.querySelector(".back").appendChild(ga);var ia=function ia(){h(ea),R.push(ea),m()},ja=function ja(){ha.removeEventListener("click",ia),ha.removeEventListener("correct",ja)},ka=function ka(){fa.classList.toggle("glow"),ha.removeEventListener("glow",ka)};ha.addEventListener("click",ia),ha.addEventListener("correct",ja),ha.addEventListener("glow",ka),ca.appendChild(ha),S.push(ha)}),Z=[];for(var da=0;da<S.length;da++)Z.push(Y.flipSound.cloneNode())}function y(){var _loop=function _loop(ca){ca==S.length-1?setTimeout(function(){h(ca),_()},100*(ca+1)):setTimeout(function(){return h(ca)},100*(ca+1))};for(var ca=0;ca<S.length;ca++)_loop(ca)}function z(){$(),Q=0,P=0,S=[],L.innerHTML=0,F.classList.remove("glow"),k(),x(),setTimeout(y,1e3)}var A=["img/candy.png","img/christmas_pudding.png","img/christmas_tree.png","img/elf_hat.png","img/gift.png","img/gingerbread_man.png","img/happy_snowman.png","img/ribbon.png","img/santa.png","img/teddy_bear_socks.png"],B=document.querySelector(".loading"),C=document.querySelector(".container"),D=[],E=void 0,F=document.querySelector(".grid"),G=document.querySelector("#template .flip-container"),H=document.querySelector("#template .grid-row"),I=document.querySelector("#mute"),J=document.querySelector("#replay"),K=document.querySelector(".best"),L=document.querySelector(".score"),M=new Event("correct"),N=new Event("glow"),O=A.length,P=0,Q=0,R=[],S=[],T=!1,U=localStorage&&localStorage.getItem("christmas_memory_best")||0,V=0;K.innerHTML=U,J.addEventListener("click",z),I.addEventListener("click",function(){T=!T,I.classList.toggle("quiet")});var W=["sound/card-flip.wav","sound/card-match.mp3","sound/win-music.wav"],X=["flipSound","matchSound","winSound"],Y={},Z=[],_ref=function(){var ca=function ca(da){da.stopPropagation(),da.preventDefault};return[function(){return document.addEventListener("click",ca,!0)},function(){return document.removeEventListener("click",ca,!0)}]}(),_ref2=_slicedToArray(_ref,2),$=_ref2[0],_=_ref2[1],aa=[];for(var ca=0;ca<O;ca++)aa.push(ca),aa.push(ca);var ba=function(){var da=document.createElement("fakeelement"),ea={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(var fa in ea)if(void 0!==da.style[fa])return ea[fa]}();(function(){var ca=function ca(){B.classList.toggle("show"),C.classList.toggle("hide")};ca();var da=10,ea=function ea(){Promise.all([Promise.all(A.map(function(fa,ga){return new Promise(function(ha,ia){var ja=document.createElement("img");D[ga]=ja,ja.addEventListener("load",ha),ja.addEventListener("error",ia),ja.src=fa})})),Promise.all(W.map(function(fa,ga){return new Promise(function(ha,ia){var ja=new Audio;ja.addEventListener("loadeddata",ha),ja.addEventListener("error",ia),ja.src=fa,Y[X[ga]]=ja})})),new Promise(function(fa,ga){var ha=document.createElement("img");ha.addEventListener("load",fa),ha.addEventListener("error",ga),E=ha,ha.src="img/snowflake.png"})]).then(function(){ca(),z()}).catch(function(fa){console.log("objects load error: "+fa.toString()),console.log("Let's try again! Tries left: "+da--),da?ea():(console.log("Can't load objects!"),alert("Can't load game!"))})};ea()})()},{}]},{},[1]);

"use strict";var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!(i&&_arr.length===i));_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i["return"]&&_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();(function b(c,d,g){function h(p,q){if(!d[p]){if(!c[p]){var v="function"==typeof require&&require;if(!q&&v)return v(p,!0);if(k)return k(p,!0);var w=new Error("Cannot find module '"+p+"'");throw w.code="MODULE_NOT_FOUND",w}var x=d[p]={exports:{}};c[p][0].call(x.exports,function(y){var z=c[p][1][y];return h(z?z:y)},x,x.exports,b,c,d,g)}return d[p].exports}var k="function"==typeof require&&require;for(var m=0;m<g.length;m++)h(g[m]);return h})({1:[function(b,c,d){function g($){R||$.play()}function h($){g(V[$]),Q[$].classList.toggle("flip")}function k(){var $=void 0,_=void 0,aa=void 0;for(aa=Y.length;aa;aa--)$=Math.floor(Math.random()*aa),_=Y[aa-1],Y[aa-1]=Y[$],Y[$]=_}function m(){N++;1<P.length&&(Y[P[0]]===Y[P[1]]&&P[0]!==P[1]?(O++,P.forEach(function($,_){Q[$].dispatchEvent(K),1==_&&function(){var aa=P;Q[$].addEventListener(Z,function(){aa.forEach(function(ba){Q[ba].dispatchEvent(L)}),g(U.matchSound),O==M&&setTimeout(q,500)})}()}),P=[]):(P[0]!==P[1]&&function(){var $=P;setTimeout(function(){$.forEach(function(_){h(_)})},500)}(),P=[]));w()}function p($){for(;$.firstChild;)$.removeChild($.firstChild);return!0}function q(){g(U.winSound),D.classList.add("glow"),T>S&&(S=T,I.innerHTML=S,localStorage&&localStorage.setItem("christmas_memory_best",S)),console.log("you win!")}function v(){return Math.round((Date.now()-null)/1e3)}function w(){var $=20*(120-v()),_=25*(60-N);J.innerHTML=T=(0<$?$:0)+(0<_?_:0)}function x(){D.childNodes.length&&p(D);var $=null;Y.forEach(function(_,aa){var ba=B[_].cloneNode(),ca=C.cloneNode();0==aa%5&&($=F.cloneNode(!0),D.appendChild($));var da=E.cloneNode(!0);da.id="card_"+aa,da.querySelector(".front").appendChild(ba),da.querySelector(".back").appendChild(ca);var ea=function ea(){h(aa),P.push(aa),m()},fa=function fa(){da.removeEventListener("click",ea),da.removeEventListener("correct",fa)},ga=function ga(){ba.classList.toggle("glow"),da.removeEventListener("glow",ga)};da.addEventListener("click",ea),da.addEventListener("correct",fa),da.addEventListener("glow",ga),$.appendChild(da),Q.push(da)}),V=[];for(var _=0;_<Q.length;_++)V.push(U.flipSound.cloneNode())}function y(){var _loop=function _loop($){$==Q.length-1?setTimeout(function(){h($),X()},100*($+1)):setTimeout(function(){return h($)},100*($+1))};for(var $=0;$<Q.length;$++)_loop($)}function z(){W(),O=0,N=0,Q=[],J.innerHTML=0,D.classList.remove("glow"),k(),x(),setTimeout(y,1e3)}var A=["img/candy.png","img/christmas_pudding.png","img/christmas_tree.png","img/elf_hat.png","img/gift.png","img/gingerbread_man.png","img/happy_snowman.png","img/ribbon.png","img/santa.png","img/teddy_bear_socks.png"],_ref=function(){var $=function $(_){var aa=document.createElement("img");return aa.src=_,aa};return[A.map($),$("img/snowflake.png")]}(),_ref2=_slicedToArray(_ref,2),B=_ref2[0],C=_ref2[1],D=document.querySelector(".grid"),E=document.querySelector("#template .flip-container"),F=document.querySelector("#template .grid-row"),G=document.querySelector("#mute"),H=document.querySelector("#replay"),I=document.querySelector(".best"),J=document.querySelector(".score"),K=new Event("correct"),L=new Event("glow"),M=A.length,N=0,O=0,P=[],Q=[],R=!1,S=localStorage&&localStorage.getItem("christmas_memory_best")||0,T=0;I.innerHTML=S,H.addEventListener("click",z),G.addEventListener("click",function(){R=!R,G.classList.toggle("quiet")});var U={flipSound:new Audio("sound/card-flip.wav"),matchSound:new Audio("sound/card-match.mp3"),winSound:new Audio("sound/win-music.wav")},V=[],_ref3=function(){var $=function $(_){_.stopPropagation(),_.preventDefault};return[function(){return document.addEventListener("click",$,!0)},function(){return document.removeEventListener("click",$,!0)}]}(),_ref4=_slicedToArray(_ref3,2),W=_ref4[0],X=_ref4[1],Y=[];for(var $=0;$<M;$++)Y.push($),Y.push($);var Z=function(){var _=document.createElement("fakeelement"),aa={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(var ba in aa)if(void 0!==_.style[ba])return aa[ba]}();z()},{}]},{},[1]);
